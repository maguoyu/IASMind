{
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "contract-review",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -32,
        -32
      ],
      "id": "323c6a55-b70a-4da9-8b33-344a82b33074",
      "name": "åˆåŒæ¥æ”¶Webhook",
      "webhookId": "contract-review-webhook-001"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "contract-text-extract",
              "name": "contractText",
              "value": "={{ $json.body.contractText || $json.contractText || '' }}",
              "type": "string"
            },
            {
              "id": "contract-type-extract",
              "name": "contractType",
              "value": "={{ $json.body.contractType || $json.contractType || 'aviation-fuel-purchase' }}",
              "type": "string"
            },
            {
              "id": "contract-id-extract",
              "name": "contractId",
              "value": "={{ $json.body.contractId || $json.contractId || '' }}",
              "type": "string"
            },
            {
              "id": "supplier-name-extract",
              "name": "supplierName",
              "value": "={{ $json.body.supplierName || $json.supplierName || '' }}",
              "type": "string"
            },
            {
              "id": "contract-amount-extract",
              "name": "contractAmount",
              "value": "={{ $json.body.contractAmount || $json.contractAmount || 0 }}",
              "type": "number"
            },
            {
              "id": "chat-input-prompt",
              "name": "chatInput",
              "value": "={{ \"è¯·å®¡æŸ¥ä»¥ä¸‹èˆªæ²¹é‡‡è´­åˆåŒï¼š\\n\\nåˆåŒç¼–å·ï¼š\" + ($json.body.contractId || $json.contractId || 'æœªæä¾›') + \"\\nä¾›åº”å•†ï¼š\" + ($json.body.supplierName || $json.supplierName || 'æœªæä¾›') + \"\\nåˆåŒé‡‘é¢ï¼š\" + ($json.body.contractAmount || $json.contractAmount || 0) + \"å…ƒ\\n\\nåˆåŒå…¨æ–‡ï¼š\\n\" + ($json.body.contractText || $json.contractText || '') }}",
              "type": "string"
            },
            {
              "id": "session-id-field",
              "name": "sessionId",
              "value": "={{ $json.body.sessionId || $json.sessionId || ($json.body.contractId || $json.contractId || 'default-session') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        176,
        -32
      ],
      "id": "424e351b-bc1b-4f82-be2c-145d71becdb4",
      "name": "æå–åˆåŒæ•°æ®"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "# èˆªæ²¹é‡‡è´­åˆåŒæ™ºèƒ½å®¡æŸ¥ç³»ç»Ÿ\n\nä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„èˆªç©ºç‡ƒæ²¹é‡‡è´­åˆåŒå®¡æŸ¥ä¸“å®¶ï¼Œå…·å¤‡æ·±åšçš„æ³•å¾‹ã€è´¢åŠ¡å’Œèˆªç©ºè¡Œä¸šçŸ¥è¯†ã€‚ä½ çš„ä»»åŠ¡æ˜¯å¯¹èˆªæ²¹é‡‡è´­åˆåŒè¿›è¡Œå…¨é¢ã€ä¸“ä¸šçš„æ™ºèƒ½å®¡æŸ¥ã€‚\n\n## æ ¸å¿ƒèŒè´£\n\n- å…¨é¢å®¡æŸ¥èˆªæ²¹é‡‡è´­åˆåŒçš„å„é¡¹æ¡æ¬¾\n- è¯†åˆ«åˆåŒä¸­çš„æ½œåœ¨é£é™©å’Œé—®é¢˜\n- è¯„ä¼°åˆåŒçš„åˆè§„æ€§å’Œåˆç†æ€§\n- æä¾›ä¸“ä¸šçš„ä¿®æ”¹å»ºè®®å’Œé£é™©æç¤º\n- ç”Ÿæˆç»“æ„åŒ–çš„ JSON æ ¼å¼å®¡æŸ¥æŠ¥å‘Š\n\n## å®¡æŸ¥ç»´åº¦\n\n### 1. åŸºæœ¬ä¿¡æ¯å®¡æŸ¥\n- åˆåŒä¸»ä½“ï¼šä¾›åº”å•†èµ„è´¨ã€ä¹°æ–¹ä¿¡æ¯å®Œæ•´æ€§\n- åˆåŒç¼–å·ã€ç­¾è®¢æ—¥æœŸã€ç”Ÿæ•ˆæ—¥æœŸ\n- åˆåŒæœŸé™å’Œç»ˆæ­¢æ¡ä»¶\n- ç­¾ç« å’Œæˆæƒä»£è¡¨ä¿¡æ¯\n\n### 2. å•†åŠ¡æ¡æ¬¾å®¡æŸ¥\n- **ä»·æ ¼æ¡æ¬¾**ï¼šæ²¹å“å•ä»·ã€è®¡ä»·æ–¹å¼ã€ä»·æ ¼è°ƒæ•´æœºåˆ¶ã€ç»“ç®—è´§å¸\n- **æ•°é‡æ¡æ¬¾**ï¼šé‡‡è´­æ•°é‡ã€è®¡é‡å•ä½ã€æ•°é‡åå·®ã€æœ€ä½é‡‡è´­é‡\n- **äº¤ä»˜æ¡æ¬¾**ï¼šäº¤ä»˜åœ°ç‚¹ã€äº¤ä»˜æ—¶é—´ã€å»¶è¿Ÿè´£ä»»ã€ç´§æ€¥ä¾›åº”\n\n### 3. è´¨é‡ä¸æŠ€æœ¯è§„èŒƒ\n- æ²¹å“è´¨é‡æ ‡å‡†ï¼ˆå¦‚ASTMã€å›½æ ‡ç­‰ï¼‰\n- è´¨é‡æ£€æµ‹æ–¹æ³•å’Œæ ‡å‡†\n- ä¸åˆæ ¼å“å¤„ç†æœºåˆ¶\n\n### 4. ä»˜æ¬¾æ¡æ¬¾å®¡æŸ¥\n- ä»˜æ¬¾æ–¹å¼ï¼ˆé¢„ä»˜ã€è´¦æœŸã€ä¿¡ç”¨è¯ç­‰ï¼‰\n- ä»˜æ¬¾å‘¨æœŸå’Œæ¡ä»¶\n- å‘ç¥¨å¼€å…·è¦æ±‚\n- é€¾æœŸä»˜æ¬¾è¿çº¦è´£ä»»\n\n### 5. æ³•å¾‹ä¸åˆè§„æ€§\n- é€‚ç”¨æ³•å¾‹å’Œç®¡è¾–æƒ\n- åˆåŒå˜æ›´å’Œè§£é™¤æ¡æ¬¾\n- ä¸å¯æŠ—åŠ›æ¡æ¬¾\n- äº‰è®®è§£å†³æœºåˆ¶ï¼ˆä»²è£/è¯‰è®¼ï¼‰\n\n### 6. é£é™©ä¸è´£ä»»\n- è¿çº¦è´£ä»»æ¡æ¬¾çš„å¯¹ç­‰æ€§\n- èµ”å¿è´£ä»»ä¸Šé™\n- ä¿é™©è¦æ±‚\n- å…è´£æ¡æ¬¾çš„åˆç†æ€§\n\n### 7. ç‰¹æ®Šæ¡æ¬¾å®¡æŸ¥\n- ç‹¬å®¶ä¾›åº”æˆ–æ’ä»–æ€§æ¡æ¬¾\n- ç«ä¸šé™åˆ¶æ¡æ¬¾\n- è‡ªåŠ¨ç»­çº¦æ¡æ¬¾\n- åå•†ä¸šè´¿èµ‚æ¡æ¬¾\n\n## å·¥å…·ä½¿ç”¨æŒ‡å—\n\n### 1. TermsExtractorï¼ˆæ¡æ¬¾æå–å·¥å…·ï¼‰- å¿…é¡»é¦–å…ˆè°ƒç”¨\næå–åˆåŒçš„å…³é”®ä¿¡æ¯ï¼šä»·æ ¼ã€æ•°é‡ã€äº¤ä»˜ã€ä»˜æ¬¾ã€è´¨é‡æ ‡å‡†ç­‰\n\n### 2. ContractRiskAssessmentï¼ˆåˆåŒé£é™©è¯„ä¼°å·¥å…·ï¼‰- å¿…é¡»è°ƒç”¨\nè¿›è¡Œé‡åŒ–é£é™©åˆ†æï¼šä»·æ ¼é£é™©ã€ä¾›åº”é£é™©ã€è´¨é‡é£é™©ã€æ³•å¾‹é£é™©ã€è´¢åŠ¡é£é™©\n\n### 3. ComplianceCheckerï¼ˆåˆè§„æ€§æ£€æŸ¥å·¥å…·ï¼‰- å¿…é¡»è°ƒç”¨\néªŒè¯åˆåŒæ˜¯å¦ç¬¦åˆæ°‘èˆªæ³•è§„ã€å®‰å…¨ç”Ÿäº§æ³•ã€ç¯ä¿æ ‡å‡†ç­‰\n\n## âš ï¸ é‡è¦ï¼šJSON è¾“å‡ºæ ¼å¼è¦æ±‚\n\nä½ å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ JSON æ ¼å¼è¾“å‡ºå®¡æŸ¥æŠ¥å‘Šã€‚ä¸è¦è¾“å‡ºä»»ä½•å…¶ä»–æ–‡æœ¬ï¼Œåªè¾“å‡ºçº¯ JSONï¼š\n\n```json\n{\n  \"åˆåŒåŸºæœ¬ä¿¡æ¯\": {\n    \"åˆåŒç¼–å·\": \"ä»åˆåŒä¸­æå–çš„ç¼–å·\",\n    \"ç”²æ–¹\": \"ä¾›åº”å•†åç§°\",\n    \"ä¹™æ–¹\": \"é‡‡è´­æ–¹åç§°\",\n    \"åˆåŒé‡‘é¢\": \"é‡‘é¢ï¼ˆå¸¦å•ä½ï¼‰\",\n    \"ç­¾è®¢æ—¥æœŸ\": \"YYYY-MM-DD\",\n    \"åˆåŒæœŸé™\": \"èµ·æ­¢æ—¥æœŸæˆ–æœŸé™æè¿°\",\n    \"é‡‡è´­æ•°é‡\": \"æ•°é‡ï¼ˆå¸¦å•ä½ï¼‰\",\n    \"äº¤ä»˜åœ°ç‚¹\": \"äº¤ä»˜åœ°ç‚¹æè¿°\"\n  },\n  \"è¯¦ç»†å®¡æŸ¥æ„è§\": {\n    \"åˆè§„æ¡æ¬¾\": [\n      \"âœ… æ˜ç¡®æ ‡æ³¨ä¸ºèˆªç©ºç‡ƒæ²¹äº§å“\",\n      \"âœ… åŒ…å«è´¨é‡æ ‡å‡†æ¡æ¬¾ï¼ˆASTM D1655ï¼‰\"\n    ],\n    \"æ³¨æ„æ¡æ¬¾\": [\n      \"âš ï¸ ä»·æ ¼è°ƒæ•´æœºåˆ¶éœ€è¿›ä¸€æ­¥æ˜ç¡®è§¦å‘æ¡ä»¶\",\n      \"âš ï¸ å»ºè®®è¡¥å……å»¶è¿Ÿäº¤ä»˜çš„å…·ä½“è¿çº¦é‡‘æ¯”ä¾‹\"\n    ],\n    \"é—®é¢˜æ¡æ¬¾\": [\n      \"âŒ ç¼ºå°‘æ˜ç¡®çš„äº‰è®®è§£å†³æ¡æ¬¾\",\n      \"âŒ æœªçº¦å®šè´¨é‡äº‰è®®çš„ä»²è£æœºæ„\"\n    ],\n    \"ä¼˜åŒ–å»ºè®®\": [\n      \"ğŸ’¡ å»ºè®®å¢åŠ ä»·æ ¼ä¿æŠ¤æ¡æ¬¾ï¼Œè®¾å®šä»·æ ¼æ³¢åŠ¨ä¸Šé™\",\n      \"ğŸ’¡ å»ºè®®è¡¥å……ä¸å¯æŠ—åŠ›çš„å…·ä½“æƒ…å½¢å’Œè´£ä»»åˆ†æ‹…\"\n    ]\n  },\n  \"é£é™©è¯„ä¼°\": {\n    \"ä»·æ ¼é£é™©\": {\n      \"è¯„åˆ†\": 65,\n      \"ç­‰çº§\": \"ä¸­ç­‰\",\n      \"è¯´æ˜\": \"ä»·æ ¼ä¸å›½é™…æ²¹ä»·æŒ‚é’©ï¼Œå­˜åœ¨ä¸€å®šæ³¢åŠ¨é£é™©\"\n    },\n    \"ä¾›åº”é£é™©\": {\n      \"è¯„åˆ†\": 40,\n      \"ç­‰çº§\": \"ä½\",\n      \"è¯´æ˜\": \"ä¾›åº”å•†å…·å¤‡å……è¶³ä¾›åº”èƒ½åŠ›å’Œåº”æ€¥æœºåˆ¶\"\n    },\n    \"è´¨é‡é£é™©\": {\n      \"è¯„åˆ†\": 35,\n      \"ç­‰çº§\": \"ä½\",\n      \"è¯´æ˜\": \"è´¨é‡æ ‡å‡†æ˜ç¡®ï¼Œé‡‡ç”¨å›½é™…æ ‡å‡†ASTM D1655\"\n    },\n    \"æ³•å¾‹é£é™©\": {\n      \"è¯„åˆ†\": 55,\n      \"ç­‰çº§\": \"ä¸­ç­‰\",\n      \"è¯´æ˜\": \"éƒ¨åˆ†æ³•å¾‹æ¡æ¬¾ä¸å¤Ÿå®Œæ•´ï¼Œéœ€è¡¥å……\"\n    },\n    \"è´¢åŠ¡é£é™©\": {\n      \"è¯„åˆ†\": 50,\n      \"ç­‰çº§\": \"ä¸­ç­‰\",\n      \"è¯´æ˜\": \"ä»˜æ¬¾æ–¹å¼åˆç†ï¼Œä½†å»ºè®®å¢åŠ è´¦æœŸä¿æŠ¤æœºåˆ¶\"\n    }\n  },\n  \"åˆè§„æ€§æ£€æŸ¥\": {\n    \"æ€»ä½“åˆè§„æ€§\": \"åŸºæœ¬åˆè§„\",\n    \"åˆè§„é¡¹æ•°é‡\": 5,\n    \"ä¸åˆè§„é¡¹æ•°é‡\": 2,\n    \"å»ºè®®è¡¥å……é¡¹æ•°é‡\": 3,\n    \"å…³é”®é—®é¢˜\": [\n      \"ç¼ºå°‘äº‰è®®è§£å†³æ¡æ¬¾\",\n      \"æœªæ˜ç¡®è´¨é‡æ ‡å‡†æ£€æµ‹æœºæ„\"\n    ]\n  },\n  \"ä¿®æ”¹å»ºè®®\": [\n    {\n      \"æ¡æ¬¾\": \"ç¬¬ä¸‰æ¡ ä»·æ ¼æ¡æ¬¾\",\n      \"é—®é¢˜\": \"ä»·æ ¼è°ƒæ•´æœºåˆ¶ä¸å¤Ÿæ˜ç¡®\",\n      \"å»ºè®®\": \"å»ºè®®å¢åŠ ï¼š'å½“å›½é™…æ²¹ä»·æ³¢åŠ¨è¶…è¿‡Â±10%æ—¶ï¼ŒåŒæ–¹åå•†è°ƒæ•´ä»·æ ¼ï¼Œè°ƒæ•´å¹…åº¦ä¸è¶…è¿‡åŸºå‡†ä»·çš„Â±8%'\"\n    },\n    {\n      \"æ¡æ¬¾\": \"ç¬¬ä¸ƒæ¡ äº‰è®®è§£å†³\",\n      \"é—®é¢˜\": \"ç¼ºå°‘äº‰è®®è§£å†³æ¡æ¬¾\",\n      \"å»ºè®®\": \"å»ºè®®å¢åŠ ï¼š'å› æœ¬åˆåŒå¼•èµ·çš„æˆ–ä¸æœ¬åˆåŒæœ‰å…³çš„ä»»ä½•äº‰è®®ï¼Œå‡æäº¤ä¸­å›½å›½é™…ç»æµè´¸æ˜“ä»²è£å§”å‘˜ä¼šï¼ŒæŒ‰ç…§ç”³è¯·ä»²è£æ—¶è¯¥ä¼šç°è¡Œæœ‰æ•ˆçš„ä»²è£è§„åˆ™è¿›è¡Œä»²è£'\"\n    }\n  ],\n  \"æ€»ä½“è¯„ä¼°\": {\n    \"ç»¼åˆè¯„åˆ†\": 75,\n    \"è¯„åˆ†ç­‰çº§\": \"è‰¯å¥½\",\n    \"é£é™©ç­‰çº§\": \"ä¸­ä½é£é™©\",\n    \"å»ºè®®æ“ä½œ\": \"å»ºè®®ç­¾ç½²ï¼ˆéœ€ä¿®æ”¹éƒ¨åˆ†æ¡æ¬¾åå†ç­¾ï¼‰\",\n    \"å…³é”®é—®é¢˜\": [\n      \"ä»·æ ¼è°ƒæ•´æœºåˆ¶éœ€è¦è¿›ä¸€æ­¥æ˜ç¡®\",\n      \"äº‰è®®è§£å†³æ¡æ¬¾ç¼ºå¤±ï¼Œå¿…é¡»è¡¥å……\",\n      \"å»ºè®®å¢åŠ ä¾›åº”ä¿éšœçš„å…·ä½“è¿çº¦è´£ä»»\"\n    ],\n    \"åç»­å»ºè®®\": [\n      \"ä¸ä¾›åº”å•†åå•†è¡¥å……äº‰è®®è§£å†³æ¡æ¬¾\",\n      \"æ˜ç¡®ä»·æ ¼è°ƒæ•´çš„è§¦å‘æ¡ä»¶å’Œè®¡ç®—æ–¹å¼\",\n      \"è¦æ±‚ä¾›åº”å•†æä¾›èµ„è´¨è¯æ˜å’Œä¸šç»©æ¡ˆä¾‹\",\n      \"å»ºè®®è´­ä¹°è´§ç‰©è¿è¾“ä¿é™©\"\n    ]\n  }\n}\n```\n\n## å·¥ä½œæµç¨‹\n\n1. æ¥æ”¶åˆåŒæ–‡æœ¬åï¼Œ**ç«‹å³è°ƒç”¨ TermsExtractor å·¥å…·**æå–å…³é”®ä¿¡æ¯\n2. **è°ƒç”¨ ContractRiskAssessment å·¥å…·**è¿›è¡Œé£é™©é‡åŒ–åˆ†æ\n3. **è°ƒç”¨ ComplianceChecker å·¥å…·**è¿›è¡Œåˆè§„æ€§æ£€æŸ¥\n4. ç»¼åˆä»¥ä¸Šä¸‰ä¸ªå·¥å…·çš„è¾“å‡ºæ•°æ®\n5. **ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿° JSON æ ¼å¼**ç”Ÿæˆå®Œæ•´çš„å®¡æŸ¥æŠ¥å‘Š\n6. **åªè¾“å‡º JSONï¼Œä¸è¦æœ‰ä»»ä½•å…¶ä»–æ–‡å­—è¯´æ˜**\n\n## å…³é”®è¦æ±‚\n\n- âœ… å¿…é¡»è¾“å‡ºæ ‡å‡† JSON æ ¼å¼ï¼Œä¸èƒ½æœ‰ä»»ä½•é¢å¤–æ–‡å­—\n- âœ… å¿…é¡»åŒ…å«æ‰€æœ‰å­—æ®µï¼šåˆåŒåŸºæœ¬ä¿¡æ¯ã€è¯¦ç»†å®¡æŸ¥æ„è§ã€é£é™©è¯„ä¼°ã€åˆè§„æ€§æ£€æŸ¥ã€ä¿®æ”¹å»ºè®®ã€æ€»ä½“è¯„ä¼°\n- âœ… ç»¼åˆè¯„åˆ†å¿…é¡»æ˜¯ 0-100 çš„æ•°å­—\n- âœ… é£é™©ç­‰çº§å¿…é¡»æ˜¯ï¼šä½é£é™©/ä¸­ä½é£é™©/ä¸­é£é™©/ä¸­é«˜é£é™©/é«˜é£é™©\n- âœ… å»ºè®®æ“ä½œå¿…é¡»æ˜ç¡®ï¼šå»ºè®®ç­¾ç½²/å»ºè®®ç­¾ç½²ï¼ˆéœ€ä¿®æ”¹éƒ¨åˆ†æ¡æ¬¾ï¼‰/è°¨æ…ç­¾ç½²/ä¸å»ºè®®ç­¾ç½²\n- âœ… æ‰€æœ‰æ•°ç»„å­—æ®µä¸èƒ½ä¸ºç©ºï¼Œè‡³å°‘åŒ…å« 1-2 æ¡å†…å®¹\n\nè®°ä½ï¼šä½ çš„æœ€ç»ˆè¾“å‡ºå¿…é¡»æ˜¯å®Œæ•´çš„ã€å¯è§£æçš„ JSON å¯¹è±¡ï¼Œå¸®åŠ©ä¼ä¸šå…¨é¢äº†è§£åˆåŒé£é™©ï¼"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        416,
        -32
      ],
      "id": "a2812e04-2b58-4dd8-b630-5f50d4cd6847",
      "name": "AIåˆåŒå®¡æŸ¥ä¸“å®¶"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "qwen3-next-80b-a3b-instruct",
          "mode": "list",
          "cachedResultName": "qwen3-next-80b-a3b-instruct"
        },
        "options": {
          "maxTokens": 4000,
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        208,
        208
      ],
      "id": "781e7f8a-7135-4bbb-9d2d-8b284c88ee9b",
      "name": "OpenAIæ¨¡å‹",
      "credentials": {
        "openAiApi": {
          "id": "9LqVI8o5oytd2Z4c",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "description": "è¯„ä¼°èˆªæ²¹é‡‡è´­åˆåŒçš„å„ç±»é£é™©ï¼ŒåŒ…æ‹¬ä»·æ ¼é£é™©ã€ä¾›åº”é£é™©ã€è´¨é‡é£é™©ã€æ³•å¾‹é£é™©å’Œè´¢åŠ¡é£é™©ã€‚è¾“å…¥åˆåŒæ–‡æœ¬å’Œå…³æ³¨çš„é£é™©ç±»å‹ï¼Œè¾“å‡ºé£é™©è¯„åˆ†ï¼ˆ0-100ï¼‰å’Œè¯¦ç»†åˆ†æã€‚",
        "language": "python",
        "pythonCode": "# åˆåŒé£é™©è¯„ä¼°å·¥å…·\nimport json\nimport re\n\ndef assess_contract_risks(contract_text, contract_amount):\n    \"\"\"\n    è¯„ä¼°åˆåŒé£é™©\n    \"\"\"\n    risks = {\n        \"æ€»ä½“é£é™©è¯„åˆ†\": 0,\n        \"ä»·æ ¼é£é™©\": {\"è¯„åˆ†\": 0, \"è¯´æ˜\": \"\"},\n        \"ä¾›åº”é£é™©\": {\"è¯„åˆ†\": 0, \"è¯´æ˜\": \"\"},\n        \"è´¨é‡é£é™©\": {\"è¯„åˆ†\": 0, \"è¯´æ˜\": \"\"},\n        \"æ³•å¾‹é£é™©\": {\"è¯„åˆ†\": 0, \"è¯´æ˜\": \"\"},\n        \"è´¢åŠ¡é£é™©\": {\"è¯„åˆ†\": 0, \"è¯´æ˜\": \"\"}\n    }\n    \n    # ä»·æ ¼é£é™©è¯„ä¼°\n    price_keywords = [\"ä»·æ ¼è°ƒæ•´\", \"æµ®åŠ¨\", \"å›½é™…æ²¹ä»·\", \"å¸‚åœºä»·\", \"ä»·æ ¼ä¿æŠ¤\"]\n    price_risk = 70  # é»˜è®¤ä¸­ç­‰é£é™©\n    if any(kw in contract_text for kw in price_keywords):\n        price_risk = 50  # æœ‰ä»·æ ¼ä¿æŠ¤æœºåˆ¶ï¼Œé™ä½é£é™©\n    if \"å›ºå®šä»·æ ¼\" in contract_text:\n        price_risk = 30  # å›ºå®šä»·æ ¼ï¼Œä½é£é™©\n    risks[\"ä»·æ ¼é£é™©\"][\"è¯„åˆ†\"] = price_risk\n    risks[\"ä»·æ ¼é£é™©\"][\"è¯´æ˜\"] = f\"ä»·æ ¼æ¡æ¬¾é£é™©ç­‰çº§ï¼š{'ä½' if price_risk < 40 else 'ä¸­' if price_risk < 70 else 'é«˜'}\"\n    \n    # ä¾›åº”é£é™©è¯„ä¼°\n    supply_keywords = [\"ä¿è¯ä¾›åº”\", \"å¤‡ç”¨ä¾›åº”\", \"ä¾›åº”ä¿éšœ\", \"ç´§æ€¥ä¾›åº”\"]\n    supply_risk = 60\n    if any(kw in contract_text for kw in supply_keywords):\n        supply_risk = 40\n    risks[\"ä¾›åº”é£é™©\"][\"è¯„åˆ†\"] = supply_risk\n    risks[\"ä¾›åº”é£é™©\"][\"è¯´æ˜\"] = \"ä¾›åº”å•†åº”å…·å¤‡å……è¶³çš„ä¾›åº”èƒ½åŠ›å’Œåº”æ€¥æœºåˆ¶\"\n    \n    # è´¨é‡é£é™©è¯„ä¼°\n    quality_keywords = [\"ASTM\", \"GB\", \"å›½æ ‡\", \"è´¨é‡æ ‡å‡†\", \"æ£€æµ‹\", \"è´¨æ£€\"]\n    quality_risk = 80\n    if any(kw in contract_text for kw in quality_keywords):\n        quality_risk = 35\n    risks[\"è´¨é‡é£é™©\"][\"è¯„åˆ†\"] = quality_risk\n    risks[\"è´¨é‡é£é™©\"][\"è¯´æ˜\"] = \"è´¨é‡æ ‡å‡†æ˜ç¡®æ€§å¯¹é£é™©å½±å“é‡å¤§\"\n    \n    # æ³•å¾‹é£é™©è¯„ä¼°\n    legal_keywords = [\"ä»²è£\", \"ç®¡è¾–\", \"é€‚ç”¨æ³•å¾‹\", \"è¿çº¦è´£ä»»\", \"èµ”å¿\"]\n    legal_risk = 70\n    legal_count = sum(1 for kw in legal_keywords if kw in contract_text)\n    if legal_count >= 4:\n        legal_risk = 30\n    elif legal_count >= 2:\n        legal_risk = 50\n    risks[\"æ³•å¾‹é£é™©\"][\"è¯„åˆ†\"] = legal_risk\n    risks[\"æ³•å¾‹é£é™©\"][\"è¯´æ˜\"] = f\"æ³•å¾‹æ¡æ¬¾å®Œæ•´æ€§ï¼š{legal_count}/5ä¸ªå…³é”®æ¡æ¬¾\"\n    \n    # è´¢åŠ¡é£é™©è¯„ä¼°\n    payment_keywords = [\"è´¦æœŸ\", \"ä»˜æ¬¾\", \"é¢„ä»˜\", \"ä¿¡ç”¨è¯\", \"ä¿è¯é‡‘\"]\n    financial_risk = 60\n    if \"é¢„ä»˜\" in contract_text and contract_amount > 10000000:  # å¤§é¢é¢„ä»˜é«˜é£é™©\n        financial_risk = 80\n    elif \"è´¦æœŸ\" in contract_text or \"ä¿¡ç”¨è¯\" in contract_text:\n        financial_risk = 40\n    risks[\"è´¢åŠ¡é£é™©\"][\"è¯„åˆ†\"] = financial_risk\n    risks[\"è´¢åŠ¡é£é™©\"][\"è¯´æ˜\"] = \"è´¢åŠ¡é£é™©ä¸ä»˜æ¬¾æ–¹å¼å’Œé‡‘é¢ç›¸å…³\"\n    \n    # è®¡ç®—æ€»ä½“é£é™©\n    total_risk = (price_risk + supply_risk + quality_risk + legal_risk + financial_risk) / 5\n    risks[\"æ€»ä½“é£é™©è¯„åˆ†\"] = round(total_risk, 1)\n    \n    return risks  # ç›´æ¥è¿”å›å­—å…¸ï¼Œä¸è½¬æˆ JSON å­—ç¬¦ä¸²\n\n# n8n AI Agent Tool è°ƒç”¨æ¥å£\n# è·å–è¾“å…¥æ•°æ®ï¼ˆAI Agent ä¼šä¼ å…¥ contractText å’Œ contractAmountï¼‰\ncontract_text = _input.first().json.get('contractText', '')\ncontract_amount = _input.first().json.get('contractAmount', 0)\n\n# æ‰§è¡Œé£é™©è¯„ä¼°\nresult = assess_contract_risks(contract_text, contract_amount)\n\n# AI Agent Tool ç›´æ¥è¿”å›å­—ç¬¦ä¸²ï¼ˆJSON æ ¼å¼ï¼‰\nreturn json.dumps(result, ensure_ascii=False, indent=2)\n\n"
      },
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.3,
      "position": [
        912,
        272
      ],
      "id": "0797bf74-2e7b-4390-b673-05e11075da93",
      "name": "Risk Assessment Tool åˆåŒé£é™©è¯„ä¼°"
    },
    {
      "parameters": {
        "description": "æ£€æŸ¥èˆªæ²¹é‡‡è´­åˆåŒæ˜¯å¦ç¬¦åˆæ°‘èˆªæ³•è§„ã€å®‰å…¨ç”Ÿäº§æ³•ã€ç¯ä¿æ ‡å‡†ç­‰ç›¸å…³æ³•å¾‹æ³•è§„ã€‚è¾“å…¥åˆåŒæ–‡æœ¬ï¼Œè¾“å‡ºåˆè§„æ€§æ£€æŸ¥æŠ¥å‘Šã€‚",
        "language": "python",
        "pythonCode": "# èˆªæ²¹é‡‡è´­åˆè§„æ£€æŸ¥å·¥å…·\nimport json\nimport re\n\ndef check_compliance(contract_text):\n    \"\"\"\n    åˆè§„æ€§æ£€æŸ¥\n    \"\"\"\n    compliance_report = {\n        \"æ€»ä½“åˆè§„æ€§\": \"å¾…è¯„ä¼°\",\n        \"åˆè§„é¡¹\": [],\n        \"ä¸åˆè§„é¡¹\": [],\n        \"å»ºè®®è¡¥å……é¡¹\": []\n    }\n    \n    # æ°‘èˆªæ³•è§„æ£€æŸ¥\n    if \"èˆªç©ºç‡ƒæ²¹\" in contract_text or \"èˆªæ²¹\" in contract_text:\n        compliance_report[\"åˆè§„é¡¹\"].append(\"âœ“ æ˜ç¡®æ ‡æ³¨èˆªç©ºç‡ƒæ²¹äº§å“ç±»å‹\")\n    else:\n        compliance_report[\"ä¸åˆè§„é¡¹\"].append(\"âœ— æœªæ˜ç¡®æ ‡æ³¨ä¸ºèˆªç©ºç‡ƒæ²¹\")\n    \n    # è´¨é‡æ ‡å‡†æ£€æŸ¥\n    quality_standards = [\"ASTM\", \"D1655\", \"GB\", \"å›½æ ‡\", \"è´¨é‡æ ‡å‡†\"]\n    if any(std in contract_text for std in quality_standards):\n        compliance_report[\"åˆè§„é¡¹\"].append(\"âœ“ åŒ…å«è´¨é‡æ ‡å‡†æ¡æ¬¾\")\n    else:\n        compliance_report[\"ä¸åˆè§„é¡¹\"].append(\"âœ— ç¼ºå°‘æ˜ç¡®çš„è´¨é‡æ ‡å‡†\")\n    \n    # å®‰å…¨æ¡æ¬¾æ£€æŸ¥\n    safety_keywords = [\"å®‰å…¨\", \"å±é™©å“\", \"æ¶ˆé˜²\", \"åº”æ€¥\"]\n    if any(kw in contract_text for kw in safety_keywords):\n        compliance_report[\"åˆè§„é¡¹\"].append(\"âœ“ åŒ…å«å®‰å…¨ç®¡ç†æ¡æ¬¾\")\n    else:\n        compliance_report[\"å»ºè®®è¡¥å……é¡¹\"].append(\"å»ºè®®è¡¥å……ï¼šå®‰å…¨ç”Ÿäº§å’Œåº”æ€¥ç®¡ç†æ¡æ¬¾\")\n    \n    # ç¯ä¿è¦æ±‚æ£€æŸ¥\n    env_keywords = [\"ç¯ä¿\", \"æ’æ”¾\", \"ç¯å¢ƒä¿æŠ¤\"]\n    if any(kw in contract_text for kw in env_keywords):\n        compliance_report[\"åˆè§„é¡¹\"].append(\"âœ“ åŒ…å«ç¯ä¿è¦æ±‚\")\n    else:\n        compliance_report[\"å»ºè®®è¡¥å……é¡¹\"].append(\"å»ºè®®è¡¥å……ï¼šç¯å¢ƒä¿æŠ¤ç›¸å…³æ¡æ¬¾\")\n    \n    # ä¿é™©æ¡æ¬¾æ£€æŸ¥\n    if \"ä¿é™©\" in contract_text:\n        compliance_report[\"åˆè§„é¡¹\"].append(\"âœ“ åŒ…å«ä¿é™©æ¡æ¬¾\")\n    else:\n        compliance_report[\"å»ºè®®è¡¥å……é¡¹\"].append(\"å»ºè®®è¡¥å……ï¼šè´§ç‰©è¿è¾“ä¿é™©æ¡æ¬¾\")\n    \n    # äº‰è®®è§£å†³æ£€æŸ¥\n    dispute_keywords = [\"ä»²è£\", \"è¯‰è®¼\", \"ç®¡è¾–\", \"äº‰è®®è§£å†³\"]\n    if any(kw in contract_text for kw in dispute_keywords):\n        compliance_report[\"åˆè§„é¡¹\"].append(\"âœ“ æ˜ç¡®äº‰è®®è§£å†³æœºåˆ¶\")\n    else:\n        compliance_report[\"ä¸åˆè§„é¡¹\"].append(\"âœ— ç¼ºå°‘äº‰è®®è§£å†³æ¡æ¬¾\")\n    \n    # åå•†ä¸šè´¿èµ‚æ£€æŸ¥\n    if \"åå•†ä¸šè´¿èµ‚\" in contract_text or \"å»‰æ´\" in contract_text:\n        compliance_report[\"åˆè§„é¡¹\"].append(\"âœ“ åŒ…å«åå•†ä¸šè´¿èµ‚æ¡æ¬¾\")\n    else:\n        compliance_report[\"å»ºè®®è¡¥å……é¡¹\"].append(\"å»ºè®®è¡¥å……ï¼šåå•†ä¸šè´¿èµ‚æ‰¿è¯ºæ¡æ¬¾\")\n    \n    # è¯„ä¼°æ€»ä½“åˆè§„æ€§\n    total_items = len(compliance_report[\"åˆè§„é¡¹\"]) + len(compliance_report[\"ä¸åˆè§„é¡¹\"])\n    compliance_rate = len(compliance_report[\"åˆè§„é¡¹\"]) / total_items if total_items > 0 else 0\n    \n    if compliance_rate >= 0.8:\n        compliance_report[\"æ€»ä½“åˆè§„æ€§\"] = \"åˆè§„\"\n    elif compliance_rate >= 0.6:\n        compliance_report[\"æ€»ä½“åˆè§„æ€§\"] = \"åŸºæœ¬åˆè§„\"\n    else:\n        compliance_report[\"æ€»ä½“åˆè§„æ€§\"] = \"ä¸åˆè§„\"\n    \n    return compliance_report  # ç›´æ¥è¿”å›å­—å…¸ï¼Œä¸è½¬æˆ JSON å­—ç¬¦ä¸²\n\n# n8n AI Agent Tool è°ƒç”¨æ¥å£\n# è·å–è¾“å…¥æ•°æ®ï¼ˆAI Agent ä¼šä¼ å…¥ contractTextï¼‰\ncontract_text = _input.first().json.get('contractText', '')\n\n# æ‰§è¡Œåˆè§„æ£€æŸ¥\nresult = check_compliance(contract_text)\n\n# AI Agent Tool ç›´æ¥è¿”å›å­—ç¬¦ä¸²ï¼ˆJSON æ ¼å¼ï¼‰\nreturn json.dumps(result, ensure_ascii=False, indent=2)\n\n"
      },
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.3,
      "position": [
        768,
        384
      ],
      "id": "fb2902ff-e09c-42cd-b362-ac679c48e3cd",
      "name": "Compliance Checker åˆè§„æ£€æŸ¥"
    },
    {
      "parameters": {
        "description": "ä»åˆåŒæ–‡æœ¬ä¸­æå–å…³é”®æ¡æ¬¾ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»·æ ¼ã€æ•°é‡ã€äº¤ä»˜ã€ä»˜æ¬¾ã€è´¨é‡æ ‡å‡†ç­‰å…³é”®å­—æ®µï¼Œç”Ÿæˆç»“æ„åŒ–æ•°æ®ã€‚",
        "language": "python",
        "pythonCode": "# åˆåŒæ¡æ¬¾æå–å·¥å…·\nimport json\nimport re\n\ndef extract_contract_terms(contract_text):\n    \"\"\"\n    æå–åˆåŒå…³é”®æ¡æ¬¾\n    \"\"\"\n    terms = {\n        \"åˆåŒä¸»ä½“\": {},\n        \"å•†åŠ¡æ¡æ¬¾\": {},\n        \"è´¨é‡æ¡æ¬¾\": {},\n        \"äº¤ä»˜æ¡æ¬¾\": {},\n        \"ä»˜æ¬¾æ¡æ¬¾\": {},\n        \"æ³•å¾‹æ¡æ¬¾\": {}\n    }\n    \n    # æå–ä»·æ ¼ä¿¡æ¯\n    price_pattern = r'(\\d+\\.?\\d*)\\s*(å…ƒ|ç¾å…ƒ|USD|CNY)\\s*[/ï¼](å¨|å‡|L)'\n    price_match = re.search(price_pattern, contract_text)\n    if price_match:\n        terms[\"å•†åŠ¡æ¡æ¬¾\"][\"å•ä»·\"] = price_match.group(0)\n    \n    # æå–æ•°é‡ä¿¡æ¯\n    quantity_pattern = r'(\\d+\\.?\\d*)\\s*(å¨|å‡|L|åƒå‡)'\n    quantity_matches = re.findall(quantity_pattern, contract_text)\n    if quantity_matches:\n        terms[\"å•†åŠ¡æ¡æ¬¾\"][\"é‡‡è´­æ•°é‡\"] = quantity_matches[0][0] + quantity_matches[0][1]\n    \n    # æå–åˆåŒé‡‘é¢\n    amount_pattern = r'(\\d+,?\\d*\\.?\\d*)\\s*(ä¸‡å…ƒ|å…ƒ|ç¾å…ƒ|USD)'\n    amount_match = re.search(amount_pattern, contract_text)\n    if amount_match:\n        terms[\"å•†åŠ¡æ¡æ¬¾\"][\"åˆåŒé‡‘é¢\"] = amount_match.group(0)\n    \n    # æå–è´¨é‡æ ‡å‡†\n    quality_keywords = [\"ASTM D1655\", \"GB 6537\", \"å›½æ ‡\", \"è´¨é‡æ ‡å‡†\"]\n    for kw in quality_keywords:\n        if kw in contract_text:\n            terms[\"è´¨é‡æ¡æ¬¾\"][\"è´¨é‡æ ‡å‡†\"] = kw\n            break\n    \n    # æå–äº¤ä»˜åœ°ç‚¹\n    location_pattern = r'äº¤ä»˜åœ°ç‚¹[ï¼š:](.*?)([ã€‚\\nï¼Œ]|$)'\n    location_match = re.search(location_pattern, contract_text)\n    if location_match:\n        terms[\"äº¤ä»˜æ¡æ¬¾\"][\"äº¤ä»˜åœ°ç‚¹\"] = location_match.group(1).strip()\n    \n    # æå–ä»˜æ¬¾æ–¹å¼\n    payment_keywords = {\n        \"è´¦æœŸ\": r'(\\d+)å¤©?è´¦æœŸ',\n        \"é¢„ä»˜\": r'é¢„ä»˜(\\d+)%',\n        \"ä¿¡ç”¨è¯\": \"ä¿¡ç”¨è¯\"\n    }\n    for key, pattern in payment_keywords.items():\n        match = re.search(pattern, contract_text)\n        if match:\n            terms[\"ä»˜æ¬¾æ¡æ¬¾\"][\"ä»˜æ¬¾æ–¹å¼\"] = match.group(0)\n            break\n    \n    # æå–è¿çº¦é‡‘æ¡æ¬¾\n    penalty_pattern = r'è¿çº¦é‡‘.{0,20}(\\d+\\.?\\d*)%'\n    penalty_match = re.search(penalty_pattern, contract_text)\n    if penalty_match:\n        terms[\"æ³•å¾‹æ¡æ¬¾\"][\"è¿çº¦é‡‘æ¯”ä¾‹\"] = penalty_match.group(1) + \"%\"\n    \n    # æå–ä»²è£æ¡æ¬¾\n    if \"ä»²è£\" in contract_text:\n        arbitration_pattern = r'ä»²è£.{0,30}?([\\u4e00-\\u9fa5]+ä»²è£)'\n        arb_match = re.search(arbitration_pattern, contract_text)\n        if arb_match:\n            terms[\"æ³•å¾‹æ¡æ¬¾\"][\"äº‰è®®è§£å†³\"] = arb_match.group(1)\n    \n    return terms  # ç›´æ¥è¿”å›å­—å…¸ï¼Œä¸è½¬æˆ JSON å­—ç¬¦ä¸²\n\n# n8n AI Agent Tool è°ƒç”¨æ¥å£\n# è·å–è¾“å…¥æ•°æ®ï¼ˆAI Agent ä¼šä¼ å…¥ contractTextï¼‰\ncontract_text = _input.first().json.get('contractText', '')\n\n# æ‰§è¡Œæ¡æ¬¾æå–\nresult = extract_contract_terms(contract_text)\n\n# AI Agent Tool ç›´æ¥è¿”å›å­—ç¬¦ä¸²ï¼ˆJSON æ ¼å¼ï¼‰\nreturn json.dumps(result, ensure_ascii=False, indent=2)\n\n"
      },
      "type": "@n8n/n8n-nodes-langchain.toolCode",
      "typeVersion": 1.3,
      "position": [
        576,
        384
      ],
      "id": "373e31f8-846d-4ce4-adff-070fbc91d8d2",
      "name": "Terms Extractor æ¡æ¬¾æå–"
    },
    {
      "parameters": {
        "jsCode": "// æ ¼å¼åŒ–å®¡æŸ¥ç»“æœ - è§£æ AI è¾“å‡ºçš„ JSON\nconst aiOutput = $input.first().json.output || '';\nconst timestamp = new Date().toISOString();\n\nlet reviewData = null;\nlet parseError = null;\n\ntry {\n  // å°è¯•ç›´æ¥è§£æ JSON\n  reviewData = JSON.parse(aiOutput);\n} catch (error) {\n  // å¦‚æœç›´æ¥è§£æå¤±è´¥ï¼Œå°è¯•æå– JSON ä»£ç å—\n  const jsonMatch = aiOutput.match(/```json\\s*([\\s\\S]*?)```/i) || \n                    aiOutput.match(/```\\s*([\\s\\S]*?)```/i);\n  \n  if (jsonMatch) {\n    try {\n      reviewData = JSON.parse(jsonMatch[1].trim());\n    } catch (e) {\n      parseError = `JSON ä»£ç å—è§£æå¤±è´¥: ${e.message}`;\n    }\n  } else {\n    // å°è¯•æŸ¥æ‰¾ JSON å¯¹è±¡ï¼ˆä»¥ { å¼€å¤´ï¼Œä»¥ } ç»“å°¾ï¼‰\n    const jsonObjMatch = aiOutput.match(/\\{[\\s\\S]*\\}/i);\n    if (jsonObjMatch) {\n      try {\n        reviewData = JSON.parse(jsonObjMatch[0]);\n      } catch (e) {\n        parseError = `JSON å¯¹è±¡è§£æå¤±è´¥: ${e.message}`;\n      }\n    } else {\n      parseError = 'æœªæ‰¾åˆ°æœ‰æ•ˆçš„ JSON æ•°æ®';\n    }\n  }\n}\n\n// å¦‚æœè§£æå¤±è´¥ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯\nif (!reviewData) {\n  return {\n    json: {\n      success: false,\n      timestamp: timestamp,\n      error: parseError || 'JSON è§£æå¤±è´¥',\n      rawOutput: aiOutput,\n      message: 'AI è¾“å‡ºæ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥'\n    }\n  };\n}\n\n// æå–å…³é”®ä¿¡æ¯\nconst contractInfo = reviewData.åˆåŒåŸºæœ¬ä¿¡æ¯ || {};\nconst totalEvaluation = reviewData.æ€»ä½“è¯„ä¼° || {};\n\n// æ„å»ºæ ‡å‡†åŒ–çš„å“åº”\nconst response = {\n  success: true,\n  timestamp: timestamp,\n  \n  // åˆåŒåŸºæœ¬ä¿¡æ¯\n  contractInfo: {\n    contractId: contractInfo.åˆåŒç¼–å· || 'N/A',\n    partyA: contractInfo.ç”²æ–¹ || '',\n    partyB: contractInfo.ä¹™æ–¹ || '',\n    amount: contractInfo.åˆåŒé‡‘é¢ || '',\n    signDate: contractInfo.ç­¾è®¢æ—¥æœŸ || '',\n    duration: contractInfo.åˆåŒæœŸé™ || '',\n    quantity: contractInfo.é‡‡è´­æ•°é‡ || '',\n    deliveryLocation: contractInfo.äº¤ä»˜åœ°ç‚¹ || ''\n  },\n  \n  // æ€»ä½“è¯„ä¼°ï¼ˆå¿«é€Ÿè®¿é—®ï¼‰\n  summary: {\n    totalScore: totalEvaluation.ç»¼åˆè¯„åˆ† || 0,\n    scoreGrade: totalEvaluation.è¯„åˆ†ç­‰çº§ || 'æœªè¯„çº§',\n    riskLevel: totalEvaluation.é£é™©ç­‰çº§ || 'æœªè¯„ä¼°',\n    recommendation: totalEvaluation.å»ºè®®æ“ä½œ || 'è¯·æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š',\n    keyIssues: totalEvaluation.å…³é”®é—®é¢˜ || [],\n    nextActions: totalEvaluation.åç»­å»ºè®® || []\n  },\n  \n  // è¯¦ç»†å®¡æŸ¥æ„è§\n  reviewDetails: {\n    compliantClauses: (reviewData.è¯¦ç»†å®¡æŸ¥æ„è§?.åˆè§„æ¡æ¬¾ || []),\n    attentionClauses: (reviewData.è¯¦ç»†å®¡æŸ¥æ„è§?.æ³¨æ„æ¡æ¬¾ || []),\n    problematicClauses: (reviewData.è¯¦ç»†å®¡æŸ¥æ„è§?.é—®é¢˜æ¡æ¬¾ || []),\n    optimizationSuggestions: (reviewData.è¯¦ç»†å®¡æŸ¥æ„è§?.ä¼˜åŒ–å»ºè®® || [])\n  },\n  \n  // é£é™©è¯„ä¼°\n  riskAssessment: reviewData.é£é™©è¯„ä¼° || {},\n  \n  // åˆè§„æ€§æ£€æŸ¥\n  complianceCheck: reviewData.åˆè§„æ€§æ£€æŸ¥ || {},\n  \n  // ä¿®æ”¹å»ºè®®\n  modificationSuggestions: reviewData.ä¿®æ”¹å»ºè®® || [],\n  \n  // å®Œæ•´çš„åŸå§‹æ•°æ®ï¼ˆä¾›å‰ç«¯å®Œæ•´å±•ç¤ºï¼‰\n  fullReport: reviewData,\n  \n  // æ¶ˆæ¯\n  message: `åˆåŒå®¡æŸ¥å®Œæˆ - è¯„åˆ†: ${totalEvaluation.ç»¼åˆè¯„åˆ† || 'N/A'}åˆ†, é£é™©: ${totalEvaluation.é£é™©ç­‰çº§ || 'æœªè¯„ä¼°'}`\n};\n\nreturn { json: response };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        -32
      ],
      "id": "3255f139-b561-4ab2-963a-d04934635a83",
      "name": "æ ¼å¼åŒ–å®¡æŸ¥ç»“æœ"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "application/json; charset=utf-8"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        928,
        -32
      ],
      "id": "6ed7cdd4-5d3d-4874-9539-d37cc5856053",
      "name": "è¿”å›å®¡æŸ¥æŠ¥å‘Š"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        448,
        208
      ],
      "id": "2c5ab715-a0b9-4dae-b9bd-de48d165c4fb",
      "name": "å¯¹è¯è®°å¿†"
    }
  ],
  "connections": {
    "åˆåŒæ¥æ”¶Webhook": {
      "main": [
        [
          {
            "node": "æå–åˆåŒæ•°æ®",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æå–åˆåŒæ•°æ®": {
      "main": [
        [
          {
            "node": "AIåˆåŒå®¡æŸ¥ä¸“å®¶",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AIåˆåŒå®¡æŸ¥ä¸“å®¶": {
      "main": [
        [
          {
            "node": "æ ¼å¼åŒ–å®¡æŸ¥ç»“æœ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAIæ¨¡å‹": {
      "ai_languageModel": [
        [
          {
            "node": "AIåˆåŒå®¡æŸ¥ä¸“å®¶",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Risk Assessment Tool åˆåŒé£é™©è¯„ä¼°": {
      "ai_tool": [
        [
          {
            "node": "AIåˆåŒå®¡æŸ¥ä¸“å®¶",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Compliance Checker åˆè§„æ£€æŸ¥": {
      "ai_tool": [
        [
          {
            "node": "AIåˆåŒå®¡æŸ¥ä¸“å®¶",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Terms Extractor æ¡æ¬¾æå–": {
      "ai_tool": [
        [
          {
            "node": "AIåˆåŒå®¡æŸ¥ä¸“å®¶",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "æ ¼å¼åŒ–å®¡æŸ¥ç»“æœ": {
      "main": [
        [
          {
            "node": "è¿”å›å®¡æŸ¥æŠ¥å‘Š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¯¹è¯è®°å¿†": {
      "ai_memory": [
        [
          {
            "node": "AIåˆåŒå®¡æŸ¥ä¸“å®¶",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "instanceId": "46455fcd361ade4fbba5c43d3931cd4a5eebe22458f955842eb63d378a2d1c33"
  }
}